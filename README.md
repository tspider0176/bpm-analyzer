# アドベントカレンダーのネタ

曲のBPM、調を解析するプログラム前から作りたかったからこの際作ってしまうかと思って考えてみた。
作りたいから作るだけ。

## 1. BPM特定（大前提）
#### 理論
以下のサイトが詳しい、実装はすぐできそう  
（理論を比較的詳しく説明している、このサイトではC/C++で実装している）  
http://hp.vector.co.jp/authors/VA046927/tempo/tempo.html  
（理論が簡単に説明されている、ここでは実装なし）  
http://ackiesound.ifdef.jp/doc/tempo/main.html  
（このサイトではpythonを使って実装してる）  
http://ism1000ch.hatenablog.com/entry/2014/07/08/164124  

#### 新規性
理論についてはこれらのサイトで説明され尽くされているので特に面白味のない車輪の再発明、
ここで止めると大して面白くない

## 2. 調特定（出来ればここまでやりたい）
#### 理論
（このサイトではpythonの曲解析ライブラリのmusci21を使って調を割り出している、プログラムを辿れば理論は導けそう）
http://d.hatena.ne.jp/naraba/20121201/p1
（このサイトではメジャーかマイナーかどっちかまでを特定する工程を書いてくれてる）
http://guitarex.web.fc2.com/knowledge/key_signature.html
（ニューラルネットワークを使って調を割り出す過程を示したサイト、下の論文を参考にしているようだ）
http://qiita.com/TomokIshii/items/d1a2f49ac70b31b8806f
（論文、ニューラルネットワークを使って曲の調を割り出そうとしている）
http://www.bcp.psych.ualberta.ca/research/pdfstuff/Yaremchuk3.pdf
ここまで調べて思ったけど今回は教師を大量に用意してる暇が無いので教師あり学習は出来ない。
現存のツールを使えば一応セットは用意できるだろうけど、それも精度が問題に挙げられてるし教師があってる可能性もなかなか低い
教師無し学習なら出来るだろうけど精度が怖い、その精度を修正する理論を突き詰めてくと記事じゃなくて卒論が書ける

#### 新規性
上のpythonライブラリ、マークアップ言語で書かれたファイルに対応してるけど音楽ファイルには対応していない。（一応MIDIファイルには対応してる模様）
そのおかげで調の解析が楽に出来て精度が期待されてるんだろうけども、出来れば音楽形式のファイルそのものの解析もして欲しい。
レコボとか著名なソフトではデフォで備わってる機能だし、実装不可能では無いはず…
問題は精度になりそう

## 3. 転調箇所と転調先の特定（時間が余って暇だったら）
#### 理論（適当）
拍子が割り出せてるので拍子毎に調を割り出して、どのタイミングで調が切り替わったかを判別する
クラブ音楽限定の話になってしまうけどクラブ音楽はだいたい8の倍数で展開する（8の倍数と行きたいところだけどジャンルによってはまちまち）ので
8小節分、それまでとは違う調が続いたら転調したとみなすとか

#### 新規性
ググったけどパッと見て見付からなかった。  
セトリ無しのDJプレイで次の曲に迷ったら取り敢えず同じ調の曲から選んでつなぐようにしてるんだけども
あのレコボのキー表示、一個しかないって事は可能性の高い調を表示してるだけだよね…？  
流してる曲の途中とかで「ヤベェ！今明らかに転調した！でも何の調に転調したかワカンねぇ！」って自体は避けられるかと。  
別に曲の調に拘らなくてもフロアの空気とか今流してる曲調とか次の曲選びにもっと大事な点はあるんだけども。
あとアウトロで元の調に戻ったりするから別に深く考えなくても良いんだけども。
奇抜な調に転調しない限り元の調とも調和が取れてたりする調だったりして考えなくても良い気がするんだけども。
